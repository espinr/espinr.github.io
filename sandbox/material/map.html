<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="node_modules/material-components-web/dist/material-components-web.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://openlayers.org/en/v4.2.0/css/ol.css" type="text/css">
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
    <script src="https://openlayers.org/en/v4.2.0/build/ol.js" type="text/javascript"></script>
    <title>Map Example</title>
    <style>
      :root {
        --mdc-theme-primary: #E91E63;
      }

      html, body, #map {
        margin: 0;
        height: 100%;
        width: 100%;
      }

    .demo-card {
      max-width: 40rem;
      height: 96%;
      background-color: white;
      z-index: 1000000;
      position: absolute;
      top: 2%;
      left: 2%;
      margin: 0 0 0 0;
    }

    .mdc-card__media {
      background-size: cover;
      background-repeat: no-repeat;
      height: 100%;
    }

      #buttons {
        position: absolute;
        top: 0;
        right: 0;
      }
      #info {
        background-color: rgba(255,255,255,0.5);
      }
        .button-zoom {
            bottom: 3em;
            right: .5em;
        }
        .button-zoom button{
            background-color: rgba(40, 40, 40, .7);
            border-radius: 50%;
        }
        .ol-attribution button {
            background-color: rgba(40, 40, 40, .7);
            border-radius: 50%;
        }
    </style>
  </head>
  <body class="mdc-typography">
    <div id="map" class="map"></div>
    <div id="buttons">
        <input type="button" id="button" value="Go to â€¦"/><br>
        <div>
            <input type="radio" name="layerControl" id="layerSatellite" value="layerSatellite">Ortofoto <br>
            <input type="radio" name="layerControl" id="layerDarkMap" value="layerDarkMap">Mapa Oscuro<br>
            <input type="radio" name="layerControl" id="layerLightMap" value="layerLightMap">Mapa Luminoso<br>
        </div>
        <input type="checkbox" id="geolocate"/>Geolocate me 
        <div id="info">&nbsp;</div>
        <div id="info2">&nbsp;</div>
    </div>

      <main>
          <div class="mdc-card demo-card">
            <section class="mdc-card__media"></section>
            <section class="mdc-card__primary">
              <h1 class="mdc-card__title mdc-card__title--large"></h1>
              <h2 class="mdc-card__subtitle"></h2>
            </section>
            <section class="mdc-card__supporting-text" id="descriptionComercio">
            </section>          
            <section class="mdc-card__supporting-text" id="articleBody">
            </section>          
            <section class="mdc-card__actions">
            </section>
          </div>
      </main>

      <script src="node_modules/material-components-web/dist/material-components-web.js" charset="utf-8"></script>
      <script>

        function getIconFromType(type) {
          switch (type) {            
            case 'Artist':
              return "palette";
            case 'BusinessMen':
              return "palette";
            case 'Concept':
              return "blur_on";
            case 'Geography':
              return "public";
            case 'Event':
              return "today";
            case 'Explorer':
              return "explore";
            case 'Gijones':
              return "person_pin";
            case 'Historic':
              return "beenhere";
            case 'Job':
              return "build"
            case 'LandmarksOrHistoricalBuildings':
              return "map";
            case 'Letters':
              return "book";
            case 'Militar':
              return "security";
            case 'Monarchy':
              return "event_seat";
            case 'Nature':
              return "nature";
            case 'Organization':
              return "business";
            case 'Orography':
              return "terrain";
            case 'Philosopher':
              return "highlight";
            case 'Politician':
              return "account_balance";
            case 'Religion':
              return "add_alert";
            case 'Scientist':
              return "lightbulb_outline";
            default:
              return "help_outline";
            }
        }

        var template = '';

        function renderCardAtPosition(index) {
  
          $.getJSON( "data/data.json", function( data ) {
              val = data.rows[index];
              var image = "icons/empty.svg";
              if (val.imageUrl!==null) {
                image = "images/" + val.id + ".jpg";
              }
              $(".mdc-card__title").append(val.prettyTitle);
              $(".mdc-toolbar__title").append(val.prettyTitle);
              
              var nameKnowledgeGraph = val.prettyTitle;
              if (val.nameKnowledgeGraph!==null) {
                nameKnowledgeGraph = val.nameKnowledgeGraph;
              }
              if (nameKnowledgeGraph !== val.prettyTitle) 
                $(".mdc-card__subtitle").append(nameKnowledgeGraph);
              if (val.descriptionComercio !== null)
                $("#descriptionComercio").append(val.descriptionComercio);
              if (val.articleBody !== null)
                $("#articleBody").append(val.articleBody);

              $(".mdc-card__media").css("background-image","url('"+image+"')")

              if (val.uri !== null)
                $('<button class="mdc-button mdc-button--compact mdc-card__action">Knowledge Graph</button>').appendTo($(".mdc-card__actions"));
              if (val.url !== null)
                $('<button class="mdc-button mdc-button--compact mdc-card__action">Wikipedia</button>').appendTo($(".mdc-card__actions"));

            })
            .done(function() {
              console.log( "second success" );
            })
            .fail(function() {
              console.log( "error" );
            })
            .always(function() {
              console.log( "complete" );
            });
        }

        $( document ).ready(function() {
          initMaps();
          renderCardAtPosition(3);
        });

        $('.mdc-list-item input[type=checkbox]').click(function(){
          if (this.checked == false) {
            $("." + $(this).attr("id")).hide();
          } else {
            $("." + $(this).attr("id")).show();
          }
/*          switch ($(this).attr("id")) {            
            case 'Artist':
              break;
            case 'BusinessMen':
              break;
            case 'Concept':
              break;
            case 'Geography':
              break;
            case 'Event':
              break;
            case 'Explorer':
              break;
            case 'Gijones':
              break;
            case 'Historic':
              break;
            case 'Job':
              break;
            case 'LandmarksOrHistoricalBuildings':
              break;
            case 'Letters':
              break;
            case 'Militar':
              break;
            case 'Monarchy':
              break;
            case 'Nature':
              break;
            case 'Organization':
              break;
            case 'Orography':
              break;
            case 'Philosopher':
              break;
            case 'Politician':
              break;
            case 'Religion':
              break;
            case 'Scientist':
              break;
            default:
*/
        });
</script>
    <script src="js/maps.js" type="text/javascript"></script>
  </body>
</html>